# CSV Processing Directory

This directory is used for processing CSV files generated by the colleague's embedding script.

## Directory Structure

- `embeddings_csv/` - Place CSV files here for processing
- `processed_csv/` - Successfully processed CSV files are moved here  
- `logs/` - Processing logs and status files

## CSV File Format

The expected CSV format for embedding files:

```csv
document_id,embedding,model_name,vector_dim
uuid-123,"[0.1,0.2,0.3,...]",sentence-transformers/all-MiniLM-L12-v2,384
uuid-456,"[0.4,0.5,0.6,...]",sentence-transformers/all-MiniLM-L12-v2,384
```

Required columns:
- `document_id`: UUID of existing document in database
- `embedding`: Vector embedding as JSON array or comma-separated values

Optional columns:
- `model_name`: Name of the embedding model used (defaults to "colleague-script-v1.0")
- `vector_dim`: Dimension of embedding vector (auto-detected)

## Usage

1. Colleague places generated CSV files in `embeddings_csv/`
2. Use API endpoints to process files:
   - `POST /api/embeddings/process-csv`
   - `POST /api/embeddings/process-directory`
3. Check processing status:
   - `GET /api/embeddings/processed-files`

## Integration Script

Use `backend/scripts/csv_integration.py` for command-line processing:

```bash
# Setup directories (one time)
python csv_integration.py setup

# Process single file
python csv_integration.py process embeddings_20231107.csv

# Process all files in directory
python csv_integration.py batch

# Start automatic file watcher
python csv_integration.py watch

# Check processing status
python csv_integration.py status
```